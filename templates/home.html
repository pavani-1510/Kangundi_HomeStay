{% extends "base.html" %}

{% block title %}Home - Kangundi HomeStay{% endblock %}

{% block content %}
<div class="dashboard-page">
    <!-- Hero Section -->
    <div class="hero-section">
        <div class="hero-content">
            <p class="eyebrow">Kangundi ‚Ä¢ Ancient Estate with Modern Hospitality</p>
            <h1>Welcome to Kangundi HomeStay</h1>
            <p class="tagline">Experience the heritage of a 900-year-old Zamindari estate</p>
            
            <div class="action-buttons">
                {% if session.get('username') or session.get('phone_number') %}
                    <a class="cta-btn primary" href="{{ url_for('rooms') }}">Browse Rooms</a>
                    <a class="cta-btn secondary" href="{{ url_for('bookings') }}">My Bookings</a>
                {% else %}
                    <a class="cta-btn primary" href="{{ url_for('signup') }}">Get Started</a>
                    <a class="cta-btn secondary" href="{{ url_for('login') }}">Login</a>
                {% endif %}
            </div>
        </div>
        <div class="hero-image-container">
            <div class="image-carousel">
                <img src="{{ url_for('static', filename='images/kangundi_1.jpeg') }}" alt="Kangundi Heritage Estate" class="hero-image" id="heroImage" data-animate="fade-in">
                <button class="carousel-btn carousel-prev" id="prevBtn" type="button">‚ùÆ</button>
                <button class="carousel-btn carousel-next" id="nextBtn" type="button">‚ùØ</button>
            </div>
        </div>
    </div>

    <script>
        let currentImageIndex = 1;
        const totalImages = 4;

        function changeImage(direction) {
            currentImageIndex += direction;
            
            // Loop: if we go past 4, go back to 1; if we go before 1, go to 4
            if (currentImageIndex > totalImages) {
                currentImageIndex = 1;
            } else if (currentImageIndex < 1) {
                currentImageIndex = totalImages;
            }
            
            const imageElement = document.getElementById('heroImage');
            imageElement.style.transition = 'opacity 0.5s ease-in-out';
            imageElement.style.opacity = '0';
            
            setTimeout(() => {
                const filename = `kangundi_${currentImageIndex}.jpeg`;
                imageElement.src = `{{ url_for('static', filename='images/') }}${filename}`;
                imageElement.style.opacity = '1';
            }, 250);
        }

        // Attach event listeners to buttons
        document.getElementById('prevBtn').addEventListener('click', function() {
            changeImage(-1);
        });

        document.getElementById('nextBtn').addEventListener('click', function() {
            changeImage(1);
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowLeft') {
                changeImage(-1);
            } else if (event.key === 'ArrowRight') {
                changeImage(1);
            }
        });

        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        // Observe all animatable elements
        document.querySelectorAll('.section-block, .highlight-item, .benefit').forEach(el => {
            observer.observe(el);
        });

        // Parallax effect for hero section
        const heroSection = document.querySelector('.hero-section');
        window.addEventListener('scroll', () => {
            const scrollPosition = window.scrollY;
            if (heroSection) {
                heroSection.style.transform = `translateY(${scrollPosition * 0.5}px)`;
            }
        });
    </script>

    <style>
        /* Image Carousel Styles */
        .image-carousel {
            position: relative;
            width: 100%;
            overflow: hidden;
            border-radius: 0 15px 15px 0;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: 2px solid white;
            padding: 12px 18px;
            font-size: 20px;
            cursor: pointer;
            z-index: 20;
            transition: all 0.3s ease;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
        }

        .carousel-btn:hover {
            background: rgba(217, 119, 6, 0.9);
            border-color: #d97706;
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-prev {
            left: 15px;
        }

        .carousel-next {
            right: 15px;
        }

        .carousel-btn:active {
            transform: translateY(-50%) scale(0.95);
        }

        .hero-image {
            transition: opacity 0.5s ease-in-out;
        }

        /* Scroll animation keyframes */
        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInFromBottom {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes floatUp {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        /* Apply animations */
        .section-block {
            opacity: 0;
            animation: slideInFromBottom 0.8s ease-out forwards;
        }

        .section-block:nth-child(2) {
            animation-delay: 0.1s;
        }

        .section-block:nth-child(3) {
            animation-delay: 0.2s;
        }

        .section-block:nth-child(4) {
            animation-delay: 0.3s;
        }

        .section-block.animate-in {
            animation: slideInFromBottom 0.8s ease-out forwards !important;
        }

        .highlight-item {
            opacity: 0;
            transform: scale(0.9);
        }

        .highlight-item.animate-in {
            animation: fadeInScale 0.6s ease-out forwards;
        }

        .highlight-item:nth-child(1) { animation-delay: 0.1s; }
        .highlight-item:nth-child(2) { animation-delay: 0.2s; }
        .highlight-item:nth-child(3) { animation-delay: 0.3s; }
        .highlight-item:nth-child(4) { animation-delay: 0.4s; }

        .benefit {
            opacity: 0;
            transform: translateY(30px);
        }

        .benefit.animate-in {
            animation: slideInFromBottom 0.6s ease-out forwards;
        }

        .benefit:nth-child(1) { animation-delay: 0.1s; }
        .benefit:nth-child(2) { animation-delay: 0.2s; }
        .benefit:nth-child(3) { animation-delay: 0.3s; }
        .benefit:nth-child(4) { animation-delay: 0.4s; }

        /* Enhanced hero section animations */
        .hero-section {
            animation: fadeInScale 1s ease-out;
        }

        .hero-content {
            animation: slideInFromLeft 0.8s ease-out;
        }

        .hero-image-container {
            animation: slideInFromRight 0.8s ease-out;
        }

        /* Icon animation */
        .highlight-icon {
            display: inline-block;
            animation: floatUp 3s ease-in-out infinite;
        }

        /* Smooth transitions */
        .benefit {
            transition: all 0.3s ease;
        }

        .benefit:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(217, 119, 6, 0.15);
        }

        .highlight-item {
            transition: all 0.3s ease;
        }

        .highlight-item:hover {
            transform: scale(1.05);
        }
    </style>

    <!-- Brief History Section -->
    <div class="content-flow">
        <div id="history" class="section-block">
            <div class="section-title">
                <h2>Kangundi: A Living Heritage</h2>
                <p class="section-desc">900+ years of history</p>
            </div>
            <p class="section-text">
                The historic village of Kangundi, located in Chittoor district of Andhra Pradesh, has a recorded history dating back to 1066 AD. Founded by Kambinaidu, it evolved into a thriving Zamindari estate encompassing 268 villages at its peak. The region stands at the intersection of Telugu, Tamil, and Kannada cultures, creating a unique trilingual Dravidian heritage.
            </p>
            <div class="highlights">
                <div class="highlight-item">
                    <span class="highlight-icon">üèõÔ∏è</span>
                    <p>900+ years of documented heritage</p>
                </div>
                <div class="highlight-item">
                    <span class="highlight-icon">üëë</span>
                    <p>27 generations of rulers</p>
                </div>
                <div class="highlight-item">
                    <span class="highlight-icon">üé≠</span>
                    <p>Kangundi Plays tradition</p>
                </div>
                <div class="highlight-item">
                    <span class="highlight-icon">üåæ</span>
                    <p>Trilingual Dravidian culture</p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 2rem;">
                <a href="{{ url_for('about') }}" class="cta-btn secondary">Learn More About Our History ‚Üí</a>
            </div>
        </div>

        <!-- Cultural Heritage -->
        <div id="culture" class="section-block">
            <div class="section-title">
                <h2>Cultural Heritage</h2>
                <p class="section-desc">Traditions preserved through centuries</p>
            </div>
            <p class="section-text">
                Kangundi is a place where trilingual Dravidian cultures converge. The region is known for its Kangundi Plays theater tradition and the legendary Yamaganipalle Mahabharata festival‚Äîa 20-day celebration that attracts over 25,000 devotees. Ancient temples, hero stones, and inscriptions preserve the region's rich cultural legacy.
            </p>
            
            <div class="benefits">
                <div class="benefit">
                    <h3>üèõÔ∏è Ancient Temples</h3>
                    <p>Chola period architecture at Krishnaswami and Virupaksheswara temples</p>
                </div>
                <div class="benefit">
                    <h3>üé≠ Theater Heritage</h3>
                    <p>The Kangundi Plays tradition with national recognition</p>
                </div>
                <div class="benefit">
                    <h3>üé™ Festivals</h3>
                    <p>Multi-week celebrations connecting communities across South India</p>
                </div>
                <div class="benefit">
                    <h3>üìú Living History</h3>
                    <p>Hero stones and inscriptions keeping traditions alive</p>
                </div>
            </div>
        </div>

        <!-- Bouldering Paradise -->
        <div id="bouldering" class="section-block">
            <div class="section-title">
                <h2>World-Class Bouldering</h2>
                <p class="section-desc">A paradise for climbers of all levels</p>
            </div>
            <p class="section-text">
                Kangundi's sandstone boulders offer some of the finest climbing in South India. The rock quality is exceptional‚Äîgrippy sandstone with perfect friction that becomes even better during the cooler months. From mellow slabs perfect for beginners to steep overhangs that challenge even V10+ climbers, there's something for everyone.
            </p>
            
            <div class="benefits">
                <div class="benefit">
                    <h3>ü™® Classic Problems</h3>
                    <p>Iconic routes like "Mandala," "The Roof," and "Slabby's Delight" have become legendary in Indian climbing circles.</p>
                </div>
                <div class="benefit">
                    <h3>üö∂ Easy Access</h3>
                    <p>Most boulder fields are within 5-20 minutes walk from the village‚Äîno long approaches needed.</p>
                </div>
                <div class="benefit">
                    <h3>üå§Ô∏è Perfect Season</h3>
                    <p>October to February offers ideal conditions with cool temperatures and dry rock.</p>
                </div>
                <div class="benefit">
                    <h3>üßó All Grades</h3>
                    <p>From beginner-friendly V0s to elite V10+ projects, with the majority in the V2-V6 range.</p>
                </div>
            </div>
        </div>

        <!-- HomeStay Section -->
        <div id="homestay" class="section-block">
            <div class="section-title">
                <h2>Kangundi HomeStay</h2>
                <p class="section-desc">Your gateway to heritage and hospitality</p>
            </div>
            <p class="section-text">
                Stay in the heart of a village steeped in centuries of history. Our homestay offers authentic hospitality rooted in Kangundi's tradition of welcoming visitors while preserving the character and culture that make this estate unique.
            </p>
            
            <div class="benefits">
                <div class="benefit">
                    <h3>üè† Authentic Experience</h3>
                    <p>Experience life in a heritage village with genuine local hospitality.</p>
                </div>
                <div class="benefit">
                    <h3>üó∫Ô∏è Local Connections</h3>
                    <p>Visit historic temples, explore archaeological sites, and meet communities that preserve traditions.</p>
                </div>
                <div class="benefit">
                    <h3>üç≤ Traditional Cuisine</h3>
                    <p>Experience regional North Karnataka cuisine with recipes passed through generations.</p>
                </div>
                <div class="benefit">
                    <h3>üìñ Cultural Immersion</h3>
                    <p>Learn about festivals, traditions, and the living heritage of this ancient estate.</p>
                </div>
            </div>

            <div class="final-cta">
                <h3>Ready to explore Kangundi's heritage?</h3>
                <div class="action-buttons">
                    {% if session.get('username') or session.get('phone_number') %}
                        <a class="cta-btn primary" href="{{ url_for('rooms') }}">Browse Available Rooms</a>
                        <a class="cta-btn secondary" href="{{ url_for('bookings') }}">View My Bookings</a>
                    {% else %}
                        <a class="cta-btn primary" href="{{ url_for('signup') }}">Sign Up Now</a>
                        <a class="cta-btn secondary" href="{{ url_for('login') }}">Login</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
